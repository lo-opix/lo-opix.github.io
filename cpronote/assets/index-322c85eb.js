var Qe=Object.defineProperty;var Xe=(t,e,n)=>e in t?Qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>(Xe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function $(){}const Ze=t=>t;function Re(t){return t()}function Te(){return Object.create(null)}function J(t){t.forEach(Re)}function Se(t){return typeof t=="function"}function B(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function xe(t){return Object.keys(t).length===0}function Ee(t){return t??""}function Me(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Fe=typeof window<"u";let et=Fe?()=>window.performance.now():()=>Date.now(),De=Fe?t=>requestAnimationFrame(t):$;const x=new Set;function Be(t){x.forEach(e=>{e.c(t)||(x.delete(e),e.f())}),x.size!==0&&De(Be)}function tt(t){let e;return x.size===0&&De(Be),{promise:new Promise(n=>{x.add(e={c:t,f:n})}),abort(){x.delete(e)}}}function m(t,e){t.appendChild(e)}function Ue(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function nt(t){const e=b("style");return e.textContent="/* empty */",st(Ue(t),e),e.sheet}function st(t,e){return m(t.head||t,e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function M(t){t.parentNode&&t.parentNode.removeChild(t)}function ze(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function I(t){return document.createTextNode(t)}function T(){return I(" ")}function Je(){return I("")}function Y(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function lt(t){return Array.from(t.childNodes)}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function K(t,e){t.value=e??""}function O(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function $e(t,e,n){for(let s=0;s<t.options.length;s+=1){const l=t.options[s];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function rt(t){const e=t.querySelector(":checked");return e&&e.__value}function _e(t,e,n){t.classList.toggle(e,!!n)}function it(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}function Ne(t,e){return new t(e)}const de=new Map;let ge=0;function ot(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function at(t,e){const n={stylesheet:nt(e),rules:{}};return de.set(t,n),n}function Ce(t,e,n,s,l,o,r,a=0){const i=16.666/s;let u=`{
`;for(let v=0;v<=1;v+=i){const k=e+(n-e)*o(v);u+=v*100+`%{${r(k,1-k)}}
`}const f=u+`100% {${r(n,1-n)}}
}`,c=`__svelte_${ot(f)}_${a}`,g=Ue(t),{stylesheet:h,rules:d}=de.get(g)||at(g,t);d[c]||(d[c]=!0,h.insertRule(`@keyframes ${c} ${f}`,h.cssRules.length));const _=t.style.animation||"";return t.style.animation=`${_?`${_}, `:""}${c} ${s}ms linear ${l}ms 1 both`,ge+=1,c}function ct(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),l=n.length-s.length;l&&(t.style.animation=s.join(", "),ge-=l,ge||ut())}function ut(){De(()=>{ge||(de.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&M(e)}),de.clear())})}let re;function le(t){re=t}function Ge(){if(!re)throw new Error("Function called outside component initialization");return re}function ft(t,e){return Ge().$$.context.set(t,e),e}function _t(t){return Ge().$$.context.get(t)}function dt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const Z=[],te=[];let ee=[];const ye=[],gt=Promise.resolve();let be=!1;function mt(){be||(be=!0,gt.then(q))}function ne(t){ee.push(t)}function Ke(t){ye.push(t)}const he=new Set;let X=0;function q(){if(X!==0)return;const t=re;do{try{for(;X<Z.length;){const e=Z[X];X++,le(e),pt(e.$$)}}catch(e){throw Z.length=0,X=0,e}for(le(null),Z.length=0,X=0;te.length;)te.pop()();for(let e=0;e<ee.length;e+=1){const n=ee[e];he.has(n)||(he.add(n),n())}ee.length=0}while(Z.length);for(;ye.length;)ye.pop()();be=!1,he.clear(),le(t)}function pt(t){if(t.fragment!==null){t.update(),J(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ne)}}function ht(t){const e=[],n=[];ee.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),ee=e}let se;function vt(){return se||(se=Promise.resolve(),se.then(()=>{se=null})),se}function ve(t,e,n){t.dispatchEvent(it(`${e?"intro":"outro"}${n}`))}const fe=new Set;let R;function ie(){R={r:0,c:[],p:R}}function oe(){R.r||J(R.c),R=R.p}function E(t,e){t&&t.i&&(fe.delete(t),t.i(e))}function N(t,e,n,s){if(t&&t.o){if(fe.has(t))return;fe.add(t),R.c.push(()=>{fe.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const yt={duration:0};function Pe(t,e,n,s){let o=e(t,n,{direction:"both"}),r=s?0:1,a=null,i=null,u=null,f;function c(){u&&ct(t,u)}function g(d,_){const v=d.b-r;return _*=Math.abs(v),{a:r,b:d.b,d:v,duration:_,start:d.start,end:d.start+_,group:d.group}}function h(d){const{delay:_=0,duration:v=300,easing:k=Ze,tick:w=$,css:y}=o||yt,S={start:et()+_,b:d};d||(S.group=R,R.r+=1),"inert"in t&&(d?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),a||i?i=S:(y&&(c(),u=Ce(t,r,d,v,_,k,y)),d&&w(0,1),a=g(S,v),ne(()=>ve(t,d,"start")),tt(D=>{if(i&&D>i.start&&(a=g(i,v),i=null,ve(t,a.b,"start"),y&&(c(),u=Ce(t,r,a.b,a.duration,0,k,o.css))),a){if(D>=a.end)w(r=a.b,1-r),ve(t,a.b,"end"),i||(a.b?c():--a.group.r||J(a.group.c)),a=null;else if(D>=a.start){const j=D-a.start;r=a.a+a.d*k(j/a.duration),w(r,1-r)}}return!!(a||i)}))}return{run(d){Se(o)?vt().then(()=>{o=o({direction:d?"in":"out"}),h(d)}):h(d)},end(){c(),a=i=null}}}function we(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ke(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function F(t){t&&t.c()}function V(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),ne(()=>{const o=t.$$.on_mount.map(Re).filter(Se);t.$$.on_destroy?t.$$.on_destroy.push(...o):J(o),t.$$.on_mount=[]}),l.forEach(ne)}function W(t,e){const n=t.$$;n.fragment!==null&&(ht(n.after_update),J(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function bt(t,e){t.$$.dirty[0]===-1&&(Z.push(t),mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,s,l,o,r,a=[-1]){const i=re;le(t);const u=t.$$={fragment:null,ctx:[],props:o,update:$,not_equal:l,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:Te(),dirty:a,skip_bound:!1,root:e.target||i.$$.root};r&&r(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(c,g,...h)=>{const d=h.length?h[0]:g;return u.ctx&&l(u.ctx[c],u.ctx[c]=d)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](d),f&&bt(t,c)),g}):[],u.update(),f=!0,J(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const c=lt(e.target);u.fragment&&u.fragment.l(c),c.forEach(M)}else u.fragment&&u.fragment.c();e.intro&&E(t.$$.fragment),V(t,e.target,e.anchor),q()}le(i)}class z{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){W(this,1),this.$destroy=$}$on(e,n){if(!Se(n))return $;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const wt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wt);function kt(t){let e,n,s,l,o;return{c(){e=b("button"),n=b("span"),n.innerHTML='<span class="hamburger-inner svelte-jas1sv"></span>',p(n,"class","hamburger-box svelte-jas1sv"),p(e,"class",s="hamburger hamburger--"+t[1]+" svelte-jas1sv"),p(e,"aria-label","Hamburger menu"),_e(e,"is-active",t[0])},m(r,a){C(r,e,a),m(e,n),l||(o=[Y(e,"click",t[2]),Y(e,"click",t[3])],l=!0)},p(r,[a]){a&2&&s!==(s="hamburger hamburger--"+r[1]+" svelte-jas1sv")&&p(e,"class",s),a&3&&_e(e,"is-active",r[0])},i:$,o:$,d(r){r&&M(e),l=!1,J(o)}}}function St(t,e,n){let{open:s=!1}=e,{type:l="spin"}=e;function o(a){dt.call(this,t,a)}const r=()=>n(0,s=!s);return t.$$set=a=>{"open"in a&&n(0,s=a.open),"type"in a&&n(1,l=a.type)},[s,l,o,r]}class Dt extends z{constructor(e){super(),U(this,e,St,kt,B,{open:0,type:1})}}function Tt(t){const e=t-1;return e*e*e+1}function Ie(t,{delay:e=0,duration:n=400,easing:s=Tt,x:l=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(t),i=+a.opacity,u=a.transform==="none"?"":a.transform,f=i*(1-r),[c,g]=Me(l),[h,d]=Me(o);return{delay:e,duration:n,easing:s,css:(_,v)=>`
			transform: ${u} translate(${(1-_)*c}${g}, ${(1-_)*h}${d});
			opacity: ${i-f*v}`}}function Et(t){let e;return{c(){e=b("div"),p(e,"class","circle svelte-dqjlks"),O(e,"--size",t[3]+t[1]),O(e,"--color",t[0]),O(e,"--duration",t[2]),_e(e,"pause-animation",t[4])},m(n,s){C(n,e,s)},p(n,[s]){s&10&&O(e,"--size",n[3]+n[1]),s&1&&O(e,"--color",n[0]),s&4&&O(e,"--duration",n[2]),s&16&&_e(e,"pause-animation",n[4])},i:$,o:$,d(n){n&&M(e)}}}function Mt(t,e,n){let{color:s="#FF3E00"}=e,{unit:l="px"}=e,{duration:o="0.75s"}=e,{size:r="60"}=e,{pause:a=!1}=e;return t.$$set=i=>{"color"in i&&n(0,s=i.color),"unit"in i&&n(1,l=i.unit),"duration"in i&&n(2,o=i.duration),"size"in i&&n(3,r=i.size),"pause"in i&&n(4,a=i.pause)},[s,l,o,r,a]}class Ye extends z{constructor(e){super(),U(this,e,Mt,Et,B,{color:0,unit:1,duration:2,size:3,pause:4})}}function Le(t,e,n){const s=t.slice();return s[5]=e[n],s[7]=n,s}function qe(t){let e,n;return e=new Ye({props:{size:"20",pause:t[2]}}),{c(){F(e.$$.fragment)},m(s,l){V(e,s,l),n=!0},p(s,l){const o={};l&4&&(o.pause=s[2]),e.$set(o)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){N(e.$$.fragment,s),n=!1},d(s){W(e,s)}}}function Oe(t){let e,n,s,l=we(t[1]),o=[];for(let r=0;r<l.length;r+=1)o[r]=je(Le(t,l,r));return{c(){e=b("div");for(let r=0;r<o.length;r+=1)o[r].c();p(e,"class","menu svelte-87d7no")},m(r,a){C(r,e,a);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(e,null);s=!0},p(r,a){if(a&2){l=we(r[1]);let i;for(i=0;i<l.length;i+=1){const u=Le(r,l,i);o[i]?o[i].p(u,a):(o[i]=je(u),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=l.length}},i(r){s||(r&&ne(()=>{s&&(n||(n=Pe(e,Ie,{y:-15},!0)),n.run(1))}),s=!0)},o(r){r&&(n||(n=Pe(e,Ie,{y:-15},!1)),n.run(0)),s=!1},d(r){r&&M(e),ze(o,r),r&&n&&n.end()}}}function je(t){let e,n=t[5]+"",s;return{c(){e=b("button"),s=I(n),p(e,"class","pageBtn svelte-87d7no")},m(l,o){C(l,e,o),m(e,s)},p(l,o){o&2&&n!==(n=l[5]+"")&&A(s,n)},d(l){l&&M(e)}}}function $t(t){let e,n,s,l,o,r,a,i,u,f,c=!t[2]&&qe(t);function g(_){t[4](_)}let h={};t[3]!==void 0&&(h.open=t[3]),r=new Dt({props:h}),te.push(()=>ke(r,"open",g));let d=t[3]&&Oe(t);return{c(){e=b("header"),n=b("p"),s=I(t[0]),l=T(),c&&c.c(),o=T(),a=b("div"),F(r.$$.fragment),u=T(),d&&d.c(),O(a,"display","contents"),O(a,"--color","white"),p(e,"class","svelte-87d7no")},m(_,v){C(_,e,v),m(e,n),m(n,s),m(e,l),c&&c.m(e,null),m(e,o),m(e,a),V(r,a,null),m(e,u),d&&d.m(e,null),f=!0},p(_,[v]){(!f||v&1)&&A(s,_[0]),_[2]?c&&(ie(),N(c,1,1,()=>{c=null}),oe()):c?(c.p(_,v),v&4&&E(c,1)):(c=qe(_),c.c(),E(c,1),c.m(e,o));const k={};!i&&v&8&&(i=!0,k.open=_[3],Ke(()=>i=!1)),r.$set(k),_[3]?d?(d.p(_,v),v&8&&E(d,1)):(d=Oe(_),d.c(),E(d,1),d.m(e,null)):d&&(ie(),N(d,1,1,()=>{d=null}),oe())},i(_){f||(E(c),E(r.$$.fragment,_),E(d),f=!0)},o(_){N(c),N(r.$$.fragment,_),N(d),f=!1},d(_){_&&M(e),c&&c.d(),W(r),d&&d.d()}}}function Nt(t,e,n){let{studentName:s="NAME Firstname"}=e,{pages:l=[]}=e,o=!1,{spinnerStop:r=!0}=e;function a(i){o=i,n(3,o)}return t.$$set=i=>{"studentName"in i&&n(0,s=i.studentName),"pages"in i&&n(1,l=i.pages),"spinnerStop"in i&&n(2,r=i.spinnerStop)},[s,l,r,o,a]}class Ct extends z{constructor(e){super(),U(this,e,Nt,$t,B,{studentName:0,pages:1,spinnerStop:2})}}const me="https://api.getpapillon.xyz/";function Ae(t,e,n,s){return new Promise((o,r)=>{let a=new Headers;a.append("Connection","keep-alive");var i=new FormData;i.append("url",t),i.append("username",e),i.append("password",n),i.append("ent",s);let u={method:"POST",body:i,headers:a};fetch(`${me}generatetoken`,u).then(f=>f.text()).then(f=>{let c=JSON.parse(f);c.token===!1?r(c.error):o(c.token)}).catch(f=>{r(f)})})}function Pt(t){return new Promise((n,s)=>{fetch(`${me}user?token=${t}`).then(l=>l.text()).then(l=>{l==='"notfound"'?s(l):n(l)}).catch(l=>{s(l)})})}function It(t){return new Promise((n,s)=>{fetch(`${me}grades?token=${t}`).then(l=>l.text()).then(l=>{l==='"notfound"'?s(l):(n(l),sessionStorage.setItem("grades",l))}).catch(l=>{s(l)})})}function Lt(t,e){return new Promise((s,l)=>{fetch(`${me}timetable?token=${t}&dateString=${e}`).then(o=>o.text()).then(o=>{o==='"notfound"'?l(o):(s(o),sessionStorage.setItem("timetable",o))}).catch(o=>{l(o)})})}function qt(t){let e,n,s,l,o,r,a,i,u,f,c,g,h;return{c(){e=b("div"),n=b("div"),s=b("p"),s.textContent="OverallMean",l=T(),o=b("p"),r=I(t[0]),a=T(),i=b("div"),u=b("p"),u.textContent="Evolution over 7d",f=T(),c=b("p"),g=I(t[1]),p(s,"class","svelte-1e4r2hh"),p(o,"id","overallMean-txt"),p(o,"class","txt svelte-1e4r2hh"),p(n,"id","overallMean"),p(u,"class","svelte-1e4r2hh"),p(c,"id","sevenDaysMean-txt"),p(c,"class",h=(t[1].slice(0,1)==="+"?"green":"red")+" txt svelte-1e4r2hh"),p(i,"id","sevenDaysMean"),p(e,"id","main"),p(e,"class","svelte-1e4r2hh")},m(d,_){C(d,e,_),m(e,n),m(n,s),m(n,l),m(n,o),m(o,r),m(e,a),m(e,i),m(i,u),m(i,f),m(i,c),m(c,g)},p(d,[_]){_&1&&A(r,d[0]),_&2&&A(g,d[1]),_&2&&h!==(h=(d[1].slice(0,1)==="+"?"green":"red")+" txt svelte-1e4r2hh")&&p(c,"class",h)},i:$,o:$,d(d){d&&M(e)}}}function Ot(t,e,n){let{overallMeanValue:s="15.23"}=e,{sevenDaysMeanValue:l="-3.21"}=e;return t.$$set=o=>{"overallMeanValue"in o&&n(0,s=o.overallMeanValue),"sevenDaysMeanValue"in o&&n(1,l=o.sevenDaysMeanValue)},[s,l]}class jt extends z{constructor(e){super(),U(this,e,Ot,qt,B,{overallMeanValue:0,sevenDaysMeanValue:1})}}function At(t){let e,n,s,l,o,r,a,i,u,f,c,g,h,d,_,v,k,w,y,S,D,j,G,ae,H,Q,ce,ue;return{c(){e=b("li"),n=b("div"),s=b("p"),l=I(t[5]),o=T(),r=b("p"),a=I(t[6]),i=T(),u=b("div"),f=T(),c=b("div"),g=b("span"),h=I(t[1]),d=T(),_=b("span"),v=I(t[2]),k=T(),w=b("span"),y=I(t[3]),S=T(),D=b("div"),j=b("span"),G=I(t[4]),ae=T(),H=b("span"),Q=I(t[7]),p(s,"class","time svelte-132gkd0"),p(r,"class","time svelte-132gkd0"),p(n,"class","class-times svelte-132gkd0"),p(u,"class","class-separator svelte-132gkd0"),O(u,"background-color",t[0]),O(u,"height","calc(5rem + "+t[9]+")"),p(g,"class","subject item svelte-132gkd0"),p(_,"class","teacher item svelte-132gkd0"),p(w,"class","group item svelte-132gkd0"),p(j,"class","room item svelte-132gkd0"),p(H,"class",ce=Ee(t[10])+" svelte-132gkd0"),p(D,"class","item last-line svelte-132gkd0"),p(c,"class","class-info-div svelte-132gkd0"),p(e,"class","class-item svelte-132gkd0"),p(e,"style",ue=t[8]?"background-color: #323232; border: 0.1rem solid #c4c4c4;)":"")},m(P,L){C(P,e,L),m(e,n),m(n,s),m(s,l),m(n,o),m(n,r),m(r,a),m(e,i),m(e,u),m(e,f),m(e,c),m(c,g),m(g,h),m(c,d),m(c,_),m(_,v),m(c,k),m(c,w),m(w,y),m(c,S),m(c,D),m(D,j),m(j,G),m(D,ae),m(D,H),m(H,Q)},p(P,[L]){L&32&&A(l,P[5]),L&64&&A(a,P[6]),L&1&&O(u,"background-color",P[0]),L&512&&O(u,"height","calc(5rem + "+P[9]+")"),L&2&&A(h,P[1]),L&4&&A(v,P[2]),L&8&&A(y,P[3]),L&16&&A(G,P[4]),L&128&&A(Q,P[7]),L&1024&&ce!==(ce=Ee(P[10])+" svelte-132gkd0")&&p(H,"class",ce),L&256&&ue!==(ue=P[8]?"background-color: #323232; border: 0.1rem solid #c4c4c4;)":"")&&p(e,"style",ue)},i:$,o:$,d(P){P&&M(e)}}}function Vt(t,e,n){let{isDoubleTime:s=!1}=e,l="0rem";s&&(l="4rem");let{color:o="#f08557"}=e,{subject:r="SUBJECT"}=e,{teacher:a="TEACHER"}=e,{group:i="[Group]"}=e,{room:u="A201"}=e,{startTime:f="9h10"}=e,{endTime:c="10h10"}=e,{status:g=""}=e,{isNow:h=!1}=e,d="";return g==="Cours annulé"||g==="Prof. absent"?d="status red":g=="Changement de salle"?d="status blue":d="status",t.$$set=_=>{"isDoubleTime"in _&&n(11,s=_.isDoubleTime),"color"in _&&n(0,o=_.color),"subject"in _&&n(1,r=_.subject),"teacher"in _&&n(2,a=_.teacher),"group"in _&&n(3,i=_.group),"room"in _&&n(4,u=_.room),"startTime"in _&&n(5,f=_.startTime),"endTime"in _&&n(6,c=_.endTime),"status"in _&&n(7,g=_.status),"isNow"in _&&n(8,h=_.isNow)},[o,r,a,i,u,f,c,g,h,l,d,s]}class Wt extends z{constructor(e){super(),U(this,e,Vt,At,B,{isDoubleTime:11,color:0,subject:1,teacher:2,group:3,room:4,startTime:5,endTime:6,status:7,isNow:8})}get isDoubleTime(){return this.$$.ctx[11]}set isDoubleTime(e){this.$$set({isDoubleTime:e}),q()}get color(){return this.$$.ctx[0]}set color(e){this.$$set({color:e}),q()}get subject(){return this.$$.ctx[1]}set subject(e){this.$$set({subject:e}),q()}get teacher(){return this.$$.ctx[2]}set teacher(e){this.$$set({teacher:e}),q()}get group(){return this.$$.ctx[3]}set group(e){this.$$set({group:e}),q()}get room(){return this.$$.ctx[4]}set room(e){this.$$set({room:e}),q()}get startTime(){return this.$$.ctx[5]}set startTime(e){this.$$set({startTime:e}),q()}get endTime(){return this.$$.ctx[6]}set endTime(e){this.$$set({endTime:e}),q()}get status(){return this.$$.ctx[7]}set status(e){this.$$set({status:e}),q()}get isNow(){return this.$$.ctx[8]}set isNow(e){this.$$set({isNow:e}),q()}}function Ht(t){let e;return{c(){e=b("div"),e.innerHTML='<ul id="list-container" class="svelte-8gjsit"></ul>',p(e,"class","main svelte-8gjsit")},m(n,s){C(n,e,s)},p:$,i:$,o:$,d(n){n&&M(e)}}}function Rt(t,e,n){const s=new Date;let l=s.getHours()*60+s.getMinutes();function o(r){const a=document.getElementById("list-container");r.sort(function(u,f){let c=parseInt(u.start.slice(-5).replace(":","")),g=parseInt(f.start.slice(-5).replace(":",""));return c-g});let i;for(let u of r){let f=u.start.slice(-5),c=u.end.slice(-5);i!=null&&f==i.startTime&&i.$destroy();let g=!1;const[h,d]=f.split(":").map(Number),_=h*60+d,[v,k]=c.split(":").map(Number),w=v*60+k;w-_>=80&&(g=!0);let S=u.subject.name,D=u.teachers[0],j=u.rooms[0],G=u.group_names[0];G==null&&(G="");let ae=u.background_color,H=u.status;H==null&&(H="");let Q=!1;_<=l&&w>=l&&s.getDay()==new Date("aClass.start").getDay()&&(Q=!0,i!==void 0&&i.isNow==!0&&(i.isNow=!1)),i=new Wt({target:a,props:{isNow:Q,isDoubleTime:g,subject:S.toString(),teacher:D,room:j,group:G,startTime:f,endTime:c,color:ae,status:H}})}}return[o]}class Ft extends z{constructor(e){super(),U(this,e,Rt,Ht,B,{setTimetable:0})}get setTimetable(){return this.$$.ctx[0]}}function Bt(t){let e,n,s,l;e=new jt({props:{overallMeanValue:t[1],sevenDaysMeanValue:t[2]}});let o={};return s=new Ft({props:o}),t[4](s),{c(){F(e.$$.fragment),n=T(),F(s.$$.fragment)},m(r,a){V(e,r,a),C(r,n,a),V(s,r,a),l=!0},p(r,[a]){const i={};a&2&&(i.overallMeanValue=r[1]),a&4&&(i.sevenDaysMeanValue=r[2]),e.$set(i);const u={};s.$set(u)},i(r){l||(E(e.$$.fragment,r),E(s.$$.fragment,r),l=!0)},o(r){N(e.$$.fragment,r),N(s.$$.fragment,r),l=!1},d(r){r&&M(n),W(e,r),t[4](null),W(s,r)}}}function Ut(t,e,n){let s,l,o,{spinnerStop:r}=e,a=new Date;a.setDate(a.getDate()-7);function i(){let c=sessionStorage.getItem("token");n(3,r=!1),It(c).then(g=>{let h=JSON.parse(g),d=[],_=[];for(let y of h.grades){let S=new Date(y.date),D=y.grade.value,j=y.grade.out_of;j!==20&&(D=20*D/j),S>a?d.push(D):_.push(D)}let v=0;v=d.reduce((y,S)=>y+S,0),v/=d.length;let k=0;k=_.reduce((y,S)=>y+S,0),k/=_.length,n(3,r=!0),n(1,l=h.overall_average);let w=Math.round((v-k)*100)/100;w>=0?n(2,o=`+${w.toString()}`):n(2,o=`-${w.toString()}`)}).catch(()=>{setTimeout(()=>i(),1e3)})}function u(){let c=sessionStorage.getItem("token");const g=new Date;g.getDay()==6?g.setDate(g.getDate()+2):g.getDay()==0&&g.setDate(g.getDate()+1);const h=g.getFullYear(),d=String(g.getMonth()+1).padStart(2,"0"),_=String(g.getDate()).padStart(2,"0"),v=`${h}-${d}-${_}`;Lt(c,v).then(k=>{let w=JSON.parse(k);s.setTimetable(w)}).catch(k=>{setTimeout(()=>u(),1e3)})}u(),i();function f(c){te[c?"unshift":"push"](()=>{s=c,n(0,s)})}return t.$$set=c=>{"spinnerStop"in c&&n(3,r=c.spinnerStop)},[s,l,o,r,f]}class zt extends z{constructor(e){super(),U(this,e,Ut,Bt,B,{spinnerStop:3})}}const Jt=[{name:"Lycée Connecté",url:"mon.lyceeconnecte.fr",py:"lyceeconnecte_aquitaine",educonnect:!1},{name:"Lycée Connecté via ÉduConnect",url:"mon.lyceeconnecte.fr",py:"lyceeconnecte_edu",educonnect:!0}];function Gt(t,e,n){const s=t.slice();return s[6]=e[n],s}function Kt(t){let e;return{c(){e=b("option"),e.textContent=`${t[6].name} `,e.__value=t[6],K(e,e.__value)},m(n,s){C(n,e,s)},p:$,d(n){n&&M(e)}}}function Ve(t){let e,n,s,l,o,r,a;return l=new Ye({}),{c(){e=b("div"),n=T(),s=b("div"),F(l.$$.fragment),o=T(),r=b("p"),r.textContent="Logging",p(e,"class","page-blur svelte-qqmng1"),p(s,"class","login-popup svelte-qqmng1")},m(i,u){C(i,e,u),C(i,n,u),C(i,s,u),V(l,s,null),m(s,o),m(s,r),a=!0},i(i){a||(E(l.$$.fragment,i),a=!0)},o(i){N(l.$$.fragment,i),a=!1},d(i){i&&(M(e),M(n),M(s)),W(l)}}}function Yt(t){let e,n,s,l,o,r,a,i,u,f,c,g,h,d,_,v=we(Jt),k=[];for(let y=0;y<v.length;y+=1)k[y]=Kt(Gt(t,v,y));let w=t[5]&&Ve();return{c(){e=b("div"),n=b("input"),s=T(),l=b("input"),o=T(),r=b("input"),a=T(),i=b("select");for(let y=0;y<k.length;y+=1)k[y].c();u=T(),f=b("button"),c=I("Login"),g=T(),w&&w.c(),p(n,"id","url"),p(n,"placeholder","Pronote Url"),p(n,"class","input svelte-qqmng1"),p(l,"placeholder","Username"),p(l,"class","input svelte-qqmng1"),p(r,"placeholder","Password"),p(r,"type","password"),p(r,"class","input svelte-qqmng1"),p(i,"class","input svelte-qqmng1"),t[3]===void 0&&ne(()=>t[11].call(i)),f.disabled=t[4],p(f,"class","svelte-qqmng1"),p(e,"class","svelte-qqmng1")},m(y,S){C(y,e,S),m(e,n),K(n,t[0]),m(e,s),m(e,l),K(l,t[1]),m(e,o),m(e,r),K(r,t[2]),m(e,a),m(e,i);for(let D=0;D<k.length;D+=1)k[D]&&k[D].m(i,null);$e(i,t[3],!0),m(e,u),m(e,f),m(f,c),m(e,g),w&&w.m(e,null),h=!0,d||(_=[Y(n,"input",t[8]),Y(l,"input",t[9]),Y(r,"input",t[10]),Y(i,"change",t[11]),Y(f,"click",t[7])],d=!0)},p(y,[S]){S&1&&n.value!==y[0]&&K(n,y[0]),S&2&&l.value!==y[1]&&K(l,y[1]),S&4&&r.value!==y[2]&&K(r,y[2]),S&8&&$e(i,y[3]),(!h||S&16)&&(f.disabled=y[4]),y[5]?w?S&32&&E(w,1):(w=Ve(),w.c(),E(w,1),w.m(e,null)):w&&(ie(),N(w,1,1,()=>{w=null}),oe())},i(y){h||(E(w),h=!0)},o(y){N(w),h=!1},d(y){y&&M(e),ze(k,y),w&&w.d(),d=!1,J(_)}}}function Qt(t,e,n){const{checkTokenEmpty:s}=_t("loginPage");let l="",o="",r="",a="",i,u=!1,f=!1;function c(){n(4,u=!0),n(6,a=i.py),n(5,f=!0),Ae(l,o,r,a).then(v=>{sessionStorage.setItem("token",v),localStorage.setItem("pronote_url",l),localStorage.setItem("username",o),localStorage.setItem("password",r),localStorage.setItem("ent",a),s()}).catch(v=>{alert(`Error: ${v}`),n(4,u=!1),n(5,f=!1)})}localStorage.getItem("pronote_url")&&localStorage.getItem("username")&&localStorage.getItem("password")&&localStorage.getItem("ent")&&(f=!0,Ae(localStorage.getItem("pronote_url"),localStorage.getItem("username"),localStorage.getItem("password"),localStorage.getItem("ent")).then(v=>{sessionStorage.setItem("token",v),s()}));function g(){l=this.value,n(0,l)}function h(){o=this.value,n(1,o)}function d(){r=this.value,n(2,r)}function _(){i=rt(this),n(3,i)}return[l,o,r,i,u,f,a,c,g,h,d,_]}class Xt extends z{constructor(e){super(),U(this,e,Qt,Yt,B,{})}}function Zt(t){let e,n,s,l;function o(i){t[6](i)}var r=t[4][We];function a(i,u){let f={};return i[0]!==void 0&&(f.spinnerStop=i[0]),{props:f}}return r&&(e=Ne(r,a(t)),te.push(()=>ke(e,"spinnerStop",o))),{c(){e&&F(e.$$.fragment),s=Je()},m(i,u){e&&V(e,i,u),C(i,s,u),l=!0},p(i,u){if(r!==(r=i[4][We])){if(e){ie();const f=e;N(f.$$.fragment,1,0,()=>{W(f,1)}),oe()}r?(e=Ne(r,a(i)),te.push(()=>ke(e,"spinnerStop",o)),F(e.$$.fragment),E(e.$$.fragment,1),V(e,s.parentNode,s)):e=null}else if(r){const f={};!n&&u&1&&(n=!0,f.spinnerStop=i[0],Ke(()=>n=!1)),e.$set(f)}},i(i){l||(e&&E(e.$$.fragment,i),l=!0)},o(i){e&&N(e.$$.fragment,i),l=!1},d(i){i&&M(s),e&&W(e,i)}}}function xt(t){let e,n;return e=new Xt({}),{c(){F(e.$$.fragment)},m(s,l){V(e,s,l),n=!0},p:$,i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){N(e.$$.fragment,s),n=!1},d(s){W(e,s)}}}function en(t){let e,n,s,l,o,r;e=new Ct({props:{pages:t[5],studentName:t[1]}});const a=[xt,Zt],i=[];function u(f,c){return f[2]?0:f[3]?1:-1}return~(s=u(t))&&(l=i[s]=a[s](t)),{c(){F(e.$$.fragment),n=T(),l&&l.c(),o=Je()},m(f,c){V(e,f,c),C(f,n,c),~s&&i[s].m(f,c),C(f,o,c),r=!0},p(f,[c]){const g={};c&2&&(g.studentName=f[1]),e.$set(g);let h=s;s=u(f),s===h?~s&&i[s].p(f,c):(l&&(ie(),N(i[h],1,1,()=>{i[h]=null}),oe()),~s?(l=i[s],l?l.p(f,c):(l=i[s]=a[s](f),l.c()),E(l,1),l.m(o.parentNode,o)):l=null)},i(f){r||(E(e.$$.fragment,f),E(l),r=!0)},o(f){N(e.$$.fragment,f),N(l),r=!1},d(f){f&&(M(n),M(o)),W(e,f),~s&&i[s].d(f)}}}let We=0;function tn(t,e,n){let s=[zt],l=["Homepage"],o=!0,r="Wait for login",a=!0,i=!1;function u(){let g=sessionStorage.getItem("token");Pt(g).then(h=>{n(3,i=!0),n(0,o=!0);let d=JSON.parse(h);n(1,r=d.name)}).catch(()=>{n(0,o=!1),console.log("Token not already ready, retry in 500ms"),setTimeout(()=>{u()},500)})}function f(){n(2,a=!sessionStorage.getItem("token")),a||(n(0,o=!1),u())}ft("loginPage",{checkTokenEmpty:f});function c(g){o=g,n(0,o)}return[o,r,a,i,s,l,c]}class nn extends z{constructor(e){super(),U(this,e,tn,en,B,{})}}new nn({target:document.getElementById("app")});const sn="modulepreload",ln=function(t){return"/cpronote/"+t},He={},rn=function(e,n,s){if(!n||n.length===0)return e();const l=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=ln(o),o in He)return;He[o]=!0;const r=o.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!s)for(let f=l.length-1;f>=0;f--){const c=l[f];if(c.href===o&&(!r||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=r?"stylesheet":sn,r||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),r)return new Promise((f,c)=>{u.addEventListener("load",f),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})};function on(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:l,onRegisteredSW:o,onRegisterError:r}=t;let a,i;const u=async(c=!0)=>{await i};async function f(){if("serviceWorker"in navigator){const{Workbox:c}=await rn(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);a=new c("/cpronote/sw.js",{scope:"/cpronote/",type:"classic"}),a.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),a.addEventListener("installed",g=>{g.isUpdate||s==null||s()}),a.register({immediate:e}).then(g=>{o?o("/cpronote/sw.js",g):l==null||l(g)}).catch(g=>{r==null||r(g)})}}return i=f(),u}"serviceWorker"in navigator&&on({immediate:!0});
