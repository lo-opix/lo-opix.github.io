var Ye=Object.defineProperty;var Qe=(t,e,n)=>e in t?Ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>(Qe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function q(){}const Xe=t=>t;function Fe(t){return t()}function Te(){return Object.create(null)}function U(t){t.forEach(Fe)}function ke(t){return typeof t=="function"}function B(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ze(t){return Object.keys(t).length===0}function Me(t){return t??""}function $e(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const ze=typeof window<"u";let xe=ze?()=>window.performance.now():()=>Date.now(),De=ze?t=>requestAnimationFrame(t):q;const x=new Set;function Re(t){x.forEach(e=>{e.c(t)||(x.delete(e),e.f())}),x.size!==0&&De(Re)}function et(t){let e;return x.size===0&&De(Re),{promise:new Promise(n=>{x.add(e={c:t,f:n})}),abort(){x.delete(e)}}}function m(t,e){t.appendChild(e)}function Be(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function tt(t){const e=b("style");return e.textContent="/* empty */",nt(Be(t),e),e.sheet}function nt(t,e){return m(t.head||t,e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function E(t){return document.createTextNode(t)}function T(){return E(" ")}function We(){return E("")}function Y(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function st(t){return Array.from(t.childNodes)}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function K(t,e){t.value=e??""}function O(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function qe(t,e,n){for(let s=0;s<t.options.length;s+=1){const l=t.options[s];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function lt(t){const e=t.querySelector(":checked");return e&&e.__value}function _e(t,e,n){t.classList.toggle(e,!!n)}function rt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}function Ne(t,e){return new t(e)}const ge=new Map;let me=0;function it(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function ot(t,e){const n={stylesheet:tt(e),rules:{}};return ge.set(t,n),n}function Ce(t,e,n,s,l,o,i,a=0){const r=16.666/s;let c=`{
`;for(let v=0;v<=1;v+=r){const S=e+(n-e)*o(v);c+=v*100+`%{${i(S,1-S)}}
`}const f=c+`100% {${i(n,1-n)}}
}`,u=`__svelte_${it(f)}_${a}`,d=Be(t),{stylesheet:h,rules:g}=ge.get(d)||ot(d,t);g[u]||(g[u]=!0,h.insertRule(`@keyframes ${u} ${f}`,h.cssRules.length));const _=t.style.animation||"";return t.style.animation=`${_?`${_}, `:""}${u} ${s}ms linear ${l}ms 1 both`,me+=1,u}function at(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),l=n.length-s.length;l&&(t.style.animation=s.join(", "),me-=l,me||ut())}function ut(){De(()=>{me||(ge.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&$(e)}),ge.clear())})}let re;function le(t){re=t}function Ue(){if(!re)throw new Error("Function called outside component initialization");return re}function ct(t,e){return Ue().$$.context.set(t,e),e}function ft(t){return Ue().$$.context.get(t)}function _t(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const Z=[],te=[];let ee=[];const ye=[],gt=Promise.resolve();let be=!1;function mt(){be||(be=!0,gt.then(P))}function ne(t){ee.push(t)}function Ge(t){ye.push(t)}const he=new Set;let X=0;function P(){if(X!==0)return;const t=re;do{try{for(;X<Z.length;){const e=Z[X];X++,le(e),dt(e.$$)}}catch(e){throw Z.length=0,X=0,e}for(le(null),Z.length=0,X=0;te.length;)te.pop()();for(let e=0;e<ee.length;e+=1){const n=ee[e];he.has(n)||(he.add(n),n())}ee.length=0}while(Z.length);for(;ye.length;)ye.pop()();be=!1,he.clear(),le(t)}function dt(t){if(t.fragment!==null){t.update(),U(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ne)}}function pt(t){const e=[],n=[];ee.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),ee=e}let se;function ht(){return se||(se=Promise.resolve(),se.then(()=>{se=null})),se}function ve(t,e,n){t.dispatchEvent(rt(`${e?"intro":"outro"}${n}`))}const fe=new Set;let z;function ie(){z={r:0,c:[],p:z}}function oe(){z.r||U(z.c),z=z.p}function M(t,e){t&&t.i&&(fe.delete(t),t.i(e))}function N(t,e,n,s){if(t&&t.o){if(fe.has(t))return;fe.add(t),z.c.push(()=>{fe.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const vt={duration:0};function je(t,e,n,s){let o=e(t,n,{direction:"both"}),i=s?0:1,a=null,r=null,c=null,f;function u(){c&&at(t,c)}function d(g,_){const v=g.b-i;return _*=Math.abs(v),{a:i,b:g.b,d:v,duration:_,start:g.start,end:g.start+_,group:g.group}}function h(g){const{delay:_=0,duration:v=300,easing:S=Xe,tick:w=q,css:y}=o||vt,k={start:xe()+_,b:g};g||(k.group=z,z.r+=1),"inert"in t&&(g?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),a||r?r=k:(y&&(u(),c=Ce(t,i,g,v,_,S,y)),g&&w(0,1),a=d(k,v),ne(()=>ve(t,g,"start")),et(D=>{if(r&&D>r.start&&(a=d(r,v),r=null,ve(t,a.b,"start"),y&&(u(),c=Ce(t,i,a.b,a.duration,0,S,o.css))),a){if(D>=a.end)w(i=a.b,1-i),ve(t,a.b,"end"),r||(a.b?u():--a.group.r||U(a.group.c)),a=null;else if(D>=a.start){const L=D-a.start;i=a.a+a.d*S(L/a.duration),w(i,1-i)}}return!!(a||r)}))}return{run(g){ke(o)?ht().then(()=>{o=o({direction:g?"in":"out"}),h(g)}):h(g)},end(){u(),a=r=null}}}function we(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Se(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function R(t){t&&t.c()}function H(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),ne(()=>{const o=t.$$.on_mount.map(Fe).filter(ke);t.$$.on_destroy?t.$$.on_destroy.push(...o):U(o),t.$$.on_mount=[]}),l.forEach(ne)}function V(t,e){const n=t.$$;n.fragment!==null&&(pt(n.after_update),U(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(t,e){t.$$.dirty[0]===-1&&(Z.push(t),mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(t,e,n,s,l,o,i,a=[-1]){const r=re;le(t);const c=t.$$={fragment:null,ctx:[],props:o,update:q,not_equal:l,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Te(),dirty:a,skip_bound:!1,root:e.target||r.$$.root};i&&i(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(u,d,...h)=>{const g=h.length?h[0]:d;return c.ctx&&l(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),f&&yt(t,u)),d}):[],c.update(),f=!0,U(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const u=st(e.target);c.fragment&&c.fragment.l(u),u.forEach($)}else c.fragment&&c.fragment.c();e.intro&&M(t.$$.fragment),H(t,e.target,e.anchor),P()}le(r)}class W{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){V(this,1),this.$destroy=q}$on(e,n){if(!ke(n))return q;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!Ze(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const bt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bt);function wt(t){let e,n,s,l,o;return{c(){e=b("button"),n=b("span"),n.innerHTML='<span class="hamburger-inner svelte-jas1sv"></span>',p(n,"class","hamburger-box svelte-jas1sv"),p(e,"class",s="hamburger hamburger--"+t[1]+" svelte-jas1sv"),p(e,"aria-label","Hamburger menu"),_e(e,"is-active",t[0])},m(i,a){C(i,e,a),m(e,n),l||(o=[Y(e,"click",t[2]),Y(e,"click",t[3])],l=!0)},p(i,[a]){a&2&&s!==(s="hamburger hamburger--"+i[1]+" svelte-jas1sv")&&p(e,"class",s),a&3&&_e(e,"is-active",i[0])},i:q,o:q,d(i){i&&$(e),l=!1,U(o)}}}function St(t,e,n){let{open:s=!1}=e,{type:l="spin"}=e;function o(a){_t.call(this,t,a)}const i=()=>n(0,s=!s);return t.$$set=a=>{"open"in a&&n(0,s=a.open),"type"in a&&n(1,l=a.type)},[s,l,o,i]}class kt extends W{constructor(e){super(),J(this,e,St,wt,B,{open:0,type:1})}}function Dt(t){const e=t-1;return e*e*e+1}function Ee(t,{delay:e=0,duration:n=400,easing:s=Dt,x:l=0,y:o=0,opacity:i=0}={}){const a=getComputedStyle(t),r=+a.opacity,c=a.transform==="none"?"":a.transform,f=r*(1-i),[u,d]=$e(l),[h,g]=$e(o);return{delay:e,duration:n,easing:s,css:(_,v)=>`
			transform: ${c} translate(${(1-_)*u}${d}, ${(1-_)*h}${g});
			opacity: ${r-f*v}`}}function Tt(t){let e;return{c(){e=b("div"),p(e,"class","circle svelte-dqjlks"),O(e,"--size",t[3]+t[1]),O(e,"--color",t[0]),O(e,"--duration",t[2]),_e(e,"pause-animation",t[4])},m(n,s){C(n,e,s)},p(n,[s]){s&10&&O(e,"--size",n[3]+n[1]),s&1&&O(e,"--color",n[0]),s&4&&O(e,"--duration",n[2]),s&16&&_e(e,"pause-animation",n[4])},i:q,o:q,d(n){n&&$(e)}}}function Mt(t,e,n){let{color:s="#FF3E00"}=e,{unit:l="px"}=e,{duration:o="0.75s"}=e,{size:i="60"}=e,{pause:a=!1}=e;return t.$$set=r=>{"color"in r&&n(0,s=r.color),"unit"in r&&n(1,l=r.unit),"duration"in r&&n(2,o=r.duration),"size"in r&&n(3,i=r.size),"pause"in r&&n(4,a=r.pause)},[s,l,o,i,a]}class Ke extends W{constructor(e){super(),J(this,e,Mt,Tt,B,{color:0,unit:1,duration:2,size:3,pause:4})}}function Ie(t,e,n){const s=t.slice();return s[5]=e[n],s[7]=n,s}function Pe(t){let e,n;return e=new Ke({props:{size:"20",pause:t[2]}}),{c(){R(e.$$.fragment)},m(s,l){H(e,s,l),n=!0},p(s,l){const o={};l&4&&(o.pause=s[2]),e.$set(o)},i(s){n||(M(e.$$.fragment,s),n=!0)},o(s){N(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function Oe(t){let e,n,s,l=we(t[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=Le(Ie(t,l,i));return{c(){e=b("div");for(let i=0;i<o.length;i+=1)o[i].c();p(e,"class","menu svelte-87d7no")},m(i,a){C(i,e,a);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(e,null);s=!0},p(i,a){if(a&2){l=we(i[1]);let r;for(r=0;r<l.length;r+=1){const c=Ie(i,l,r);o[r]?o[r].p(c,a):(o[r]=Le(c),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=l.length}},i(i){s||(i&&ne(()=>{s&&(n||(n=je(e,Ee,{y:-15},!0)),n.run(1))}),s=!0)},o(i){i&&(n||(n=je(e,Ee,{y:-15},!1)),n.run(0)),s=!1},d(i){i&&$(e),Je(o,i),i&&n&&n.end()}}}function Le(t){let e,n=t[5]+"",s;return{c(){e=b("button"),s=E(n),p(e,"class","pageBtn svelte-87d7no")},m(l,o){C(l,e,o),m(e,s)},p(l,o){o&2&&n!==(n=l[5]+"")&&A(s,n)},d(l){l&&$(e)}}}function $t(t){let e,n,s,l,o,i,a,r,c,f,u=!t[2]&&Pe(t);function d(_){t[4](_)}let h={};t[3]!==void 0&&(h.open=t[3]),i=new kt({props:h}),te.push(()=>Se(i,"open",d));let g=t[3]&&Oe(t);return{c(){e=b("header"),n=b("p"),s=E(t[0]),l=T(),u&&u.c(),o=T(),a=b("div"),R(i.$$.fragment),c=T(),g&&g.c(),O(a,"display","contents"),O(a,"--color","white"),p(e,"class","svelte-87d7no")},m(_,v){C(_,e,v),m(e,n),m(n,s),m(e,l),u&&u.m(e,null),m(e,o),m(e,a),H(i,a,null),m(e,c),g&&g.m(e,null),f=!0},p(_,[v]){(!f||v&1)&&A(s,_[0]),_[2]?u&&(ie(),N(u,1,1,()=>{u=null}),oe()):u?(u.p(_,v),v&4&&M(u,1)):(u=Pe(_),u.c(),M(u,1),u.m(e,o));const S={};!r&&v&8&&(r=!0,S.open=_[3],Ge(()=>r=!1)),i.$set(S),_[3]?g?(g.p(_,v),v&8&&M(g,1)):(g=Oe(_),g.c(),M(g,1),g.m(e,null)):g&&(ie(),N(g,1,1,()=>{g=null}),oe())},i(_){f||(M(u),M(i.$$.fragment,_),M(g),f=!0)},o(_){N(u),N(i.$$.fragment,_),N(g),f=!1},d(_){_&&$(e),u&&u.d(),V(i),g&&g.d()}}}function qt(t,e,n){let{studentName:s="NAME Firstname"}=e,{pages:l=[]}=e,o=!1,{spinnerStop:i=!0}=e;function a(r){o=r,n(3,o)}return t.$$set=r=>{"studentName"in r&&n(0,s=r.studentName),"pages"in r&&n(1,l=r.pages),"spinnerStop"in r&&n(2,i=r.spinnerStop)},[s,l,i,o,a]}class Nt extends W{constructor(e){super(),J(this,e,qt,$t,B,{studentName:0,pages:1,spinnerStop:2})}}const de="https://api.getpapillon.xyz/";function Ae(t,e,n,s){return new Promise((o,i)=>{let a=new Headers;a.append("Connection","keep-alive");var r=new FormData;r.append("url",t),r.append("username",e),r.append("password",n),r.append("ent",s);let c={method:"POST",body:r,headers:a};fetch(`${de}generatetoken`,c).then(f=>f.text()).then(f=>{let u=JSON.parse(f);u.token===!1?i(u.error):o(u.token)}).catch(f=>{i(f)})})}function Ct(t){return new Promise((n,s)=>{fetch(`${de}user?token=${t}`).then(l=>l.text()).then(l=>{l==='"notfound"'?s(l):n(l)}).catch(l=>{s(l)})})}function jt(t){return new Promise((n,s)=>{fetch(`${de}grades?token=${t}`).then(l=>l.text()).then(l=>{l==='"notfound"'?s(l):(n(l),sessionStorage.setItem("grades",l))}).catch(l=>{s(l)})})}function Et(t,e){return new Promise((s,l)=>{fetch(`${de}timetable?token=${t}&dateString=${e}`).then(o=>o.text()).then(o=>{o==='"notfound"'?l(o):(s(o),sessionStorage.setItem("timetable",o))}).catch(o=>{l(o)})})}function It(t){let e,n,s,l,o,i,a,r,c,f,u,d,h;return{c(){e=b("div"),n=b("div"),s=b("p"),s.textContent="OverallMean",l=T(),o=b("p"),i=E(t[0]),a=T(),r=b("div"),c=b("p"),c.textContent="Evolution over 7d",f=T(),u=b("p"),d=E(t[1]),p(s,"class","svelte-1e4r2hh"),p(o,"id","overallMean-txt"),p(o,"class","txt svelte-1e4r2hh"),p(n,"id","overallMean"),p(c,"class","svelte-1e4r2hh"),p(u,"id","sevenDaysMean-txt"),p(u,"class",h=(t[1].slice(0,1)==="+"?"green":"red")+" txt svelte-1e4r2hh"),p(r,"id","sevenDaysMean"),p(e,"id","main"),p(e,"class","svelte-1e4r2hh")},m(g,_){C(g,e,_),m(e,n),m(n,s),m(n,l),m(n,o),m(o,i),m(e,a),m(e,r),m(r,c),m(r,f),m(r,u),m(u,d)},p(g,[_]){_&1&&A(i,g[0]),_&2&&A(d,g[1]),_&2&&h!==(h=(g[1].slice(0,1)==="+"?"green":"red")+" txt svelte-1e4r2hh")&&p(u,"class",h)},i:q,o:q,d(g){g&&$(e)}}}function Pt(t,e,n){let{overallMeanValue:s="15.23"}=e,{sevenDaysMeanValue:l="-3.21"}=e;return t.$$set=o=>{"overallMeanValue"in o&&n(0,s=o.overallMeanValue),"sevenDaysMeanValue"in o&&n(1,l=o.sevenDaysMeanValue)},[s,l]}class Ot extends W{constructor(e){super(),J(this,e,Pt,It,B,{overallMeanValue:0,sevenDaysMeanValue:1})}}function Lt(t){let e,n,s,l,o,i,a,r,c,f,u,d,h,g,_,v,S,w,y,k,D,L,G,ae,F,Q,ue,ce;return{c(){e=b("li"),n=b("div"),s=b("p"),l=E(t[5]),o=T(),i=b("p"),a=E(t[6]),r=T(),c=b("div"),f=T(),u=b("div"),d=b("span"),h=E(t[1]),g=T(),_=b("span"),v=E(t[2]),S=T(),w=b("span"),y=E(t[3]),k=T(),D=b("div"),L=b("span"),G=E(t[4]),ae=T(),F=b("span"),Q=E(t[7]),p(s,"class","time svelte-qf86kj"),p(i,"class","time svelte-qf86kj"),p(n,"class","class-times svelte-qf86kj"),p(c,"class","class-separator svelte-qf86kj"),O(c,"background-color",t[0]),O(c,"height","calc(5rem + "+t[9]+")"),p(d,"class","subject item svelte-qf86kj"),p(_,"class","teacher item svelte-qf86kj"),p(w,"class","group item svelte-qf86kj"),p(L,"class","room item svelte-qf86kj"),p(F,"class",ue=Me(t[10])+" svelte-qf86kj"),p(D,"class","item last-line svelte-qf86kj"),p(u,"class","class-info-div svelte-qf86kj"),p(e,"class","class-item svelte-qf86kj"),p(e,"style",ce=t[8]?"background-color: #323232; border: 0.1rem solid #c4c4c4;)":"")},m(j,I){C(j,e,I),m(e,n),m(n,s),m(s,l),m(n,o),m(n,i),m(i,a),m(e,r),m(e,c),m(e,f),m(e,u),m(u,d),m(d,h),m(u,g),m(u,_),m(_,v),m(u,S),m(u,w),m(w,y),m(u,k),m(u,D),m(D,L),m(L,G),m(D,ae),m(D,F),m(F,Q)},p(j,[I]){I&32&&A(l,j[5]),I&64&&A(a,j[6]),I&1&&O(c,"background-color",j[0]),I&512&&O(c,"height","calc(5rem + "+j[9]+")"),I&2&&A(h,j[1]),I&4&&A(v,j[2]),I&8&&A(y,j[3]),I&16&&A(G,j[4]),I&128&&A(Q,j[7]),I&1024&&ue!==(ue=Me(j[10])+" svelte-qf86kj")&&p(F,"class",ue),I&256&&ce!==(ce=j[8]?"background-color: #323232; border: 0.1rem solid #c4c4c4;)":"")&&p(e,"style",ce)},i:q,o:q,d(j){j&&$(e)}}}function At(t,e,n){let{isDoubleTime:s=!1}=e,l="0rem";s&&(l="4rem");let{color:o="#f08557"}=e,{subject:i="SUBJECT"}=e,{teacher:a="TEACHER"}=e,{group:r="[Group]"}=e,{room:c="A201"}=e,{startTime:f="9h10"}=e,{endTime:u="10h10"}=e,{status:d=""}=e,{isNow:h=!1}=e,g="";return d==="Cours annulé"||d==="Prof. absent"?g="status red":d=="Changement de salle"?g="status blue":g="status",t.$$set=_=>{"isDoubleTime"in _&&n(11,s=_.isDoubleTime),"color"in _&&n(0,o=_.color),"subject"in _&&n(1,i=_.subject),"teacher"in _&&n(2,a=_.teacher),"group"in _&&n(3,r=_.group),"room"in _&&n(4,c=_.room),"startTime"in _&&n(5,f=_.startTime),"endTime"in _&&n(6,u=_.endTime),"status"in _&&n(7,d=_.status),"isNow"in _&&n(8,h=_.isNow)},[o,i,a,r,c,f,u,d,h,l,g,s]}class Ht extends W{constructor(e){super(),J(this,e,At,Lt,B,{isDoubleTime:11,color:0,subject:1,teacher:2,group:3,room:4,startTime:5,endTime:6,status:7,isNow:8})}get isDoubleTime(){return this.$$.ctx[11]}set isDoubleTime(e){this.$$set({isDoubleTime:e}),P()}get color(){return this.$$.ctx[0]}set color(e){this.$$set({color:e}),P()}get subject(){return this.$$.ctx[1]}set subject(e){this.$$set({subject:e}),P()}get teacher(){return this.$$.ctx[2]}set teacher(e){this.$$set({teacher:e}),P()}get group(){return this.$$.ctx[3]}set group(e){this.$$set({group:e}),P()}get room(){return this.$$.ctx[4]}set room(e){this.$$set({room:e}),P()}get startTime(){return this.$$.ctx[5]}set startTime(e){this.$$set({startTime:e}),P()}get endTime(){return this.$$.ctx[6]}set endTime(e){this.$$set({endTime:e}),P()}get status(){return this.$$.ctx[7]}set status(e){this.$$set({status:e}),P()}get isNow(){return this.$$.ctx[8]}set isNow(e){this.$$set({isNow:e}),P()}}function Vt(t){let e;return{c(){e=b("div"),e.innerHTML='<ul id="list-container" class="svelte-1u196ud"></ul>',p(e,"class","main svelte-1u196ud")},m(n,s){C(n,e,s)},p:q,i:q,o:q,d(n){n&&$(e)}}}function Ft(t,e,n){const s=new Date;let l=s.getHours()*60+s.getMinutes();function o(i){const a=document.getElementById("list-container");i.sort(function(c,f){let u=parseInt(c.start.slice(-5).replace(":","")),d=parseInt(f.start.slice(-5).replace(":",""));return u-d});let r;for(let c of i){let f=c.start.slice(-5),u=c.end.slice(-5);r!=null&&f==r.startTime&&r.$destroy();let d=!1;const[h,g]=f.split(":").map(Number),_=h*60+g,[v,S]=u.split(":").map(Number),w=v*60+S;w-_>=80&&(d=!0);let k=c.subject.name,D=c.teachers[0],L=c.rooms[0],G=c.group_names[0];G==null&&(G="");let ae=c.background_color,F=c.status;F==null&&(F="");let Q=!1;_<=l&&w>=l&&(r.isNow==!0&&(r.isNow=!1),Q=!0),r=new Ht({target:a,props:{isNow:Q,isDoubleTime:d,subject:k.toString(),teacher:D,room:L,group:G,startTime:f,endTime:u,color:ae,status:F}})}}return[o]}class zt extends W{constructor(e){super(),J(this,e,Ft,Vt,B,{setTimetable:0})}get setTimetable(){return this.$$.ctx[0]}}function Rt(t){let e,n,s,l;e=new Ot({props:{overallMeanValue:t[1],sevenDaysMeanValue:t[2]}});let o={};return s=new zt({props:o}),t[4](s),{c(){R(e.$$.fragment),n=T(),R(s.$$.fragment)},m(i,a){H(e,i,a),C(i,n,a),H(s,i,a),l=!0},p(i,[a]){const r={};a&2&&(r.overallMeanValue=i[1]),a&4&&(r.sevenDaysMeanValue=i[2]),e.$set(r);const c={};s.$set(c)},i(i){l||(M(e.$$.fragment,i),M(s.$$.fragment,i),l=!0)},o(i){N(e.$$.fragment,i),N(s.$$.fragment,i),l=!1},d(i){i&&$(n),V(e,i),t[4](null),V(s,i)}}}function Bt(t,e,n){let s,l,o,{spinnerStop:i}=e,a=new Date;a.setDate(a.getDate()-7);function r(){let u=sessionStorage.getItem("token");n(3,i=!1),jt(u).then(d=>{let h=JSON.parse(d),g=[],_=[];for(let y of h.grades){let k=new Date(y.date),D=y.grade.value,L=y.grade.out_of;L!==20&&(D=20*D/L),k>a?g.push(D):_.push(D)}let v=0;v=g.reduce((y,k)=>y+k,0),v/=g.length;let S=0;S=_.reduce((y,k)=>y+k,0),S/=_.length,n(3,i=!0),n(1,l=h.overall_average);let w=Math.round((v-S)*100)/100;w>=0?n(2,o=`+${w.toString()}`):n(2,o=`-${w.toString()}`)}).catch(d=>{console.log(d),setTimeout(()=>r(),500)})}function c(){let u=sessionStorage.getItem("token");const d=new Date,h=d.getFullYear(),g=String(d.getMonth()+1).padStart(2,"0"),_=String(d.getDate()).padStart(2,"0"),v=`${h}-${g}-${_}`;Et(u,v).then(S=>{let w=JSON.parse(S);s.setTimetable(w),r()}).catch(()=>{setTimeout(()=>c(),500)})}c();function f(u){te[u?"unshift":"push"](()=>{s=u,n(0,s)})}return t.$$set=u=>{"spinnerStop"in u&&n(3,i=u.spinnerStop)},[s,l,o,i,f]}class Jt extends W{constructor(e){super(),J(this,e,Bt,Rt,B,{spinnerStop:3})}}const Wt=[{name:"Lycée Connecté",url:"mon.lyceeconnecte.fr",py:"lyceeconnecte_aquitaine",educonnect:!1},{name:"Lycée Connecté via ÉduConnect",url:"mon.lyceeconnecte.fr",py:"lyceeconnecte_edu",educonnect:!0}];function Ut(t,e,n){const s=t.slice();return s[6]=e[n],s}function Gt(t){let e;return{c(){e=b("option"),e.textContent=`${t[6].name} `,e.__value=t[6],K(e,e.__value)},m(n,s){C(n,e,s)},p:q,d(n){n&&$(e)}}}function He(t){let e,n,s,l,o,i,a;return l=new Ke({}),{c(){e=b("div"),n=T(),s=b("div"),R(l.$$.fragment),o=T(),i=b("p"),i.textContent="Logging",p(e,"class","page-blur svelte-qqmng1"),p(s,"class","login-popup svelte-qqmng1")},m(r,c){C(r,e,c),C(r,n,c),C(r,s,c),H(l,s,null),m(s,o),m(s,i),a=!0},i(r){a||(M(l.$$.fragment,r),a=!0)},o(r){N(l.$$.fragment,r),a=!1},d(r){r&&($(e),$(n),$(s)),V(l)}}}function Kt(t){let e,n,s,l,o,i,a,r,c,f,u,d,h,g,_,v=we(Wt),S=[];for(let y=0;y<v.length;y+=1)S[y]=Gt(Ut(t,v,y));let w=t[5]&&He();return{c(){e=b("div"),n=b("input"),s=T(),l=b("input"),o=T(),i=b("input"),a=T(),r=b("select");for(let y=0;y<S.length;y+=1)S[y].c();c=T(),f=b("button"),u=E("Login"),d=T(),w&&w.c(),p(n,"id","url"),p(n,"placeholder","Pronote Url"),p(n,"class","input svelte-qqmng1"),p(l,"placeholder","Username"),p(l,"class","input svelte-qqmng1"),p(i,"placeholder","Password"),p(i,"type","password"),p(i,"class","input svelte-qqmng1"),p(r,"class","input svelte-qqmng1"),t[3]===void 0&&ne(()=>t[11].call(r)),f.disabled=t[4],p(f,"class","svelte-qqmng1"),p(e,"class","svelte-qqmng1")},m(y,k){C(y,e,k),m(e,n),K(n,t[0]),m(e,s),m(e,l),K(l,t[1]),m(e,o),m(e,i),K(i,t[2]),m(e,a),m(e,r);for(let D=0;D<S.length;D+=1)S[D]&&S[D].m(r,null);qe(r,t[3],!0),m(e,c),m(e,f),m(f,u),m(e,d),w&&w.m(e,null),h=!0,g||(_=[Y(n,"input",t[8]),Y(l,"input",t[9]),Y(i,"input",t[10]),Y(r,"change",t[11]),Y(f,"click",t[7])],g=!0)},p(y,[k]){k&1&&n.value!==y[0]&&K(n,y[0]),k&2&&l.value!==y[1]&&K(l,y[1]),k&4&&i.value!==y[2]&&K(i,y[2]),k&8&&qe(r,y[3]),(!h||k&16)&&(f.disabled=y[4]),y[5]?w?k&32&&M(w,1):(w=He(),w.c(),M(w,1),w.m(e,null)):w&&(ie(),N(w,1,1,()=>{w=null}),oe())},i(y){h||(M(w),h=!0)},o(y){N(w),h=!1},d(y){y&&$(e),Je(S,y),w&&w.d(),g=!1,U(_)}}}function Yt(t,e,n){const{checkTokenEmpty:s}=ft("loginPage");let l="",o="",i="",a="",r,c=!1,f=!1;function u(){n(4,c=!0),n(6,a=r.py),n(5,f=!0),Ae(l,o,i,a).then(v=>{sessionStorage.setItem("token",v),localStorage.setItem("pronote_url",l),localStorage.setItem("username",o),localStorage.setItem("password",i),localStorage.setItem("ent",a),s()}).catch(v=>{alert(`Error: ${v}`),n(4,c=!1),n(5,f=!1)})}localStorage.getItem("pronote_url")&&localStorage.getItem("username")&&localStorage.getItem("password")&&localStorage.getItem("ent")&&(f=!0,Ae(localStorage.getItem("pronote_url"),localStorage.getItem("username"),localStorage.getItem("password"),localStorage.getItem("ent")).then(v=>{sessionStorage.setItem("token",v),s()}));function d(){l=this.value,n(0,l)}function h(){o=this.value,n(1,o)}function g(){i=this.value,n(2,i)}function _(){r=lt(this),n(3,r)}return[l,o,i,r,c,f,a,u,d,h,g,_]}class Qt extends W{constructor(e){super(),J(this,e,Yt,Kt,B,{})}}function Xt(t){let e,n,s,l;function o(r){t[6](r)}var i=t[4][Ve];function a(r,c){let f={};return r[0]!==void 0&&(f.spinnerStop=r[0]),{props:f}}return i&&(e=Ne(i,a(t)),te.push(()=>Se(e,"spinnerStop",o))),{c(){e&&R(e.$$.fragment),s=We()},m(r,c){e&&H(e,r,c),C(r,s,c),l=!0},p(r,c){if(i!==(i=r[4][Ve])){if(e){ie();const f=e;N(f.$$.fragment,1,0,()=>{V(f,1)}),oe()}i?(e=Ne(i,a(r)),te.push(()=>Se(e,"spinnerStop",o)),R(e.$$.fragment),M(e.$$.fragment,1),H(e,s.parentNode,s)):e=null}else if(i){const f={};!n&&c&1&&(n=!0,f.spinnerStop=r[0],Ge(()=>n=!1)),e.$set(f)}},i(r){l||(e&&M(e.$$.fragment,r),l=!0)},o(r){e&&N(e.$$.fragment,r),l=!1},d(r){r&&$(s),e&&V(e,r)}}}function Zt(t){let e,n;return e=new Qt({}),{c(){R(e.$$.fragment)},m(s,l){H(e,s,l),n=!0},p:q,i(s){n||(M(e.$$.fragment,s),n=!0)},o(s){N(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function xt(t){let e,n,s,l,o,i;e=new Nt({props:{pages:t[5],studentName:t[1]}});const a=[Zt,Xt],r=[];function c(f,u){return f[2]?0:f[3]?1:-1}return~(s=c(t))&&(l=r[s]=a[s](t)),{c(){R(e.$$.fragment),n=T(),l&&l.c(),o=We()},m(f,u){H(e,f,u),C(f,n,u),~s&&r[s].m(f,u),C(f,o,u),i=!0},p(f,[u]){const d={};u&2&&(d.studentName=f[1]),e.$set(d);let h=s;s=c(f),s===h?~s&&r[s].p(f,u):(l&&(ie(),N(r[h],1,1,()=>{r[h]=null}),oe()),~s?(l=r[s],l?l.p(f,u):(l=r[s]=a[s](f),l.c()),M(l,1),l.m(o.parentNode,o)):l=null)},i(f){i||(M(e.$$.fragment,f),M(l),i=!0)},o(f){N(e.$$.fragment,f),N(l),i=!1},d(f){f&&($(n),$(o)),V(e,f),~s&&r[s].d(f)}}}let Ve=0;function en(t,e,n){let s=[Jt],l=["Homepage"],o=!0,i="Wait for login",a=!0,r=!1;function c(){let d=sessionStorage.getItem("token");Ct(d).then(h=>{n(3,r=!0),n(0,o=!0);let g=JSON.parse(h);n(1,i=g.name)}).catch(()=>{n(0,o=!1),console.log("Token not already ready, retry in 500ms"),setTimeout(()=>{c()},500)})}function f(){n(2,a=!sessionStorage.getItem("token")),a||(n(0,o=!1),c())}ct("loginPage",{checkTokenEmpty:f});function u(d){o=d,n(0,o)}return[o,i,a,r,s,l,u]}class tn extends W{constructor(e){super(),J(this,e,en,xt,B,{})}}new tn({target:document.getElementById("app")});
